{"ast":null,"code":"import { ITSELF as r, createInterpreter as n } from \"@ucast/core\";\n\nfunction t(r, n, t) {\n  for (var u = 0, e = r.length; u < e; u++) if (0 === t(r[u], n)) return !0;\n\n  return !1;\n}\n\nfunction u(r, n) {\n  return Array.isArray(r) && Number.isNaN(Number(n));\n}\n\nfunction e(r, n, t) {\n  if (!u(r, n)) return t(r, n);\n\n  for (var e = [], o = 0; o < r.length; o++) {\n    var i = t(r[o], n);\n    void 0 !== i && (e = e.concat(i));\n  }\n\n  return e;\n}\n\nfunction o(r) {\n  return function (n, t, u) {\n    var e = u.get(t, n.field);\n    return Array.isArray(e) ? e.some(function (t) {\n      return r(n, t, u);\n    }) : r(n, e, u);\n  };\n}\n\nfunction i() {\n  return (i = Object.assign || function (r) {\n    for (var n = 1; n < arguments.length; n++) {\n      var t = arguments[n];\n\n      for (var u in t) Object.prototype.hasOwnProperty.call(t, u) && (r[u] = t[u]);\n    }\n\n    return r;\n  }).apply(this, arguments);\n}\n\nvar f = function (r, n) {\n  return r[n];\n};\n\nfunction c(r, n, t) {\n  var u = n.lastIndexOf(\".\");\n  return -1 === u ? [r, n] : [t(r, n.slice(0, u)), n.slice(u + 1)];\n}\n\nfunction a(n, t, u) {\n  if (void 0 === u && (u = f), t === r) return n;\n  if (!n) throw new Error('Unable to get field \"' + t + '\" out of ' + String(n) + \".\");\n  return function (r, n, t) {\n    if (-1 === n.indexOf(\".\")) return e(r, n, t);\n\n    for (var u = n.split(\".\"), o = r, i = 0, f = u.length; i < f; i++) if (!(o = e(o, u[i], t)) || \"object\" != typeof o) return o;\n\n    return o;\n  }(n, t, u);\n}\n\nfunction v(r) {\n  return function (n, t) {\n    return a(n, t, r);\n  };\n}\n\nfunction y(r, n) {\n  return r === n ? 0 : r > n ? 1 : -1;\n}\n\nfunction l(r, t) {\n  return void 0 === t && (t = {}), n(r, i({\n    get: a,\n    compare: y\n  }, t));\n}\n\nvar b = function (r, n, t) {\n  var u = t.interpret;\n  return r.value.some(function (r) {\n    return u(r, n);\n  });\n},\n    m = function (r, n, t) {\n  return !b(r, n, t);\n},\n    d = function (r, n, t) {\n  var u = t.interpret;\n  return r.value.every(function (r) {\n    return u(r, n);\n  });\n},\n    g = function (r, n, t) {\n  return !(0, t.interpret)(r.value[0], n);\n},\n    p = function (r, n, u) {\n  var e = u.compare,\n      o = (0, u.get)(n, r.field);\n  return Array.isArray(o) && !Array.isArray(r.value) ? t(o, r.value, e) : 0 === e(o, r.value);\n},\n    A = function (r, n, t) {\n  return !p(r, n, t);\n},\n    s = o(function (r, n, t) {\n  var u = t.compare(n, r.value);\n  return 0 === u || -1 === u;\n}),\n    h = o(function (r, n, t) {\n  return -1 === t.compare(n, r.value);\n}),\n    j = o(function (r, n, t) {\n  return 1 === t.compare(n, r.value);\n}),\n    w = o(function (r, n, t) {\n  var u = t.compare(n, r.value);\n  return 0 === u || 1 === u;\n}),\n    _ = function (n, t, e) {\n  var o = e.get;\n  if (n.field === r) return void 0 !== t;\n\n  var i = c(t, n.field, o),\n      f = i[0],\n      a = i[1],\n      v = function (r) {\n    return !!r && r.hasOwnProperty(a) === n.value;\n  };\n\n  return u(f, a) ? f.some(v) : v(f);\n},\n    x = o(function (r, n) {\n  return \"number\" == typeof n && n % r.value[0] === r.value[1];\n}),\n    O = function (n, t, e) {\n  var o = e.get,\n      i = c(t, n.field, o),\n      f = i[0],\n      a = i[1],\n      v = function (r) {\n    var t = o(r, a);\n    return Array.isArray(t) && t.length === n.value;\n  };\n\n  return n.field !== r && u(f, a) ? f.some(v) : v(f);\n},\n    N = o(function (r, n) {\n  return \"string\" == typeof n && r.value.test(n);\n}),\n    q = o(function (r, n, u) {\n  var e = u.compare;\n  return t(r.value, n, e);\n}),\n    z = function (r, n, t) {\n  return !q(r, n, t);\n},\n    E = function (r, n, u) {\n  var e = u.compare,\n      o = (0, u.get)(n, r.field);\n  return Array.isArray(o) && r.value.every(function (r) {\n    return t(o, r, e);\n  });\n},\n    M = function (r, n, t) {\n  var u = t.interpret,\n      e = (0, t.get)(n, r.field);\n  return Array.isArray(e) && e.some(function (n) {\n    return u(r.value, n);\n  });\n},\n    S = function (r, n) {\n  return r.value.call(n);\n},\n    U = i({}, Object.freeze({\n  __proto__: null,\n  or: b,\n  nor: m,\n  and: d,\n  not: g,\n  eq: p,\n  ne: A,\n  lte: s,\n  lt: h,\n  gt: j,\n  gte: w,\n  exists: _,\n  mod: x,\n  size: O,\n  regex: N,\n  within: q,\n  nin: z,\n  all: E,\n  elemMatch: M,\n  where: S\n}), {\n  in: q\n}),\n    k = l(U);\n\nexport { E as all, U as allInterpreters, d as and, y as compare, v as createGetter, l as createJsInterpreter, M as elemMatch, p as eq, _ as exists, a as getObjectField, c as getObjectFieldCursor, j as gt, w as gte, k as interpret, h as lt, s as lte, x as mod, A as ne, z as nin, m as nor, g as not, b as or, N as regex, O as size, S as where, q as within };","map":null,"metadata":{},"sourceType":"module"}